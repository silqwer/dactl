---
layout: post
title:  "Panolens object view"
tags:
  - panolens
  - WebVR
  - 360VR
hero: /../assets/resources/img/panolens/object/o1.png
overlay: purple
published: true

---
## 360Image에 3D Object
360Image에 3D Object를 불러와 상호작용하는 예제는 있다. 
{: .lead}
POI(point of interest)를 선택하면 객체의 정보를 불러오고 객체의 색상을 변경하는 예제
<img src='/../assets/resources/img/panolens/object/o2.gif' alt='object2'>
소스를 분석해도 POI를 특별하게 설정해주는 부분이 없어서 나도 그냥 오브젝트를 불러오고 원하는 부분에 POI를 위치 시켜보았다. 하지만...
<!–-break-–>

## POI 위치
<img src='/../assets/resources/img/panolens/object/o3.gif' alt='stereo'>
보이는것 과 같이 카메라를 돌리면 오브젝트에 POI가 붙어있는게 아니라 따로 놀고 있는 것을 볼 수 있었다. 
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">function</span>&nbsp;addInfospots&nbsp;()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;infospot&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">new</span>&nbsp;PANOLENS.Infospot(&nbsp;<span style="color:#c10aff">1.</span><span style="color:#c10aff">5</span>,&nbsp;PANOLENS.DataImage.Info&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;infospot.position.set(&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">28.</span><span style="color:#c10aff">24</span>,&nbsp;<span style="color:#c10aff">5.</span><span style="color:#c10aff">33</span>,&nbsp;<span style="color:#c10aff">6.</span><span style="color:#c10aff">54</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;infospot.addHoverText(&nbsp;<span style="color:#ffd500">'Dell&nbsp;-&nbsp;E2414HM&nbsp;24"&nbsp;LED&nbsp;HD&nbsp;Monitor&nbsp;-&nbsp;Black&nbsp;-&nbsp;$149.00'</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;panorama.add(&nbsp;infospot&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;infospot&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">new</span>&nbsp;PANOLENS.Infospot(&nbsp;<span style="color:#c10aff">1</span>,&nbsp;PANOLENS.DataImage.Info&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;infospot.position.set(&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">21.</span><span style="color:#c10aff">76</span>,&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">3.</span><span style="color:#c10aff">19</span>,&nbsp;<span style="color:#c10aff">12.</span><span style="color:#c10aff">96</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;infospot.addHoverText(&nbsp;<span style="color:#ffd500">'Razer&nbsp;-&nbsp;BlackWidow&nbsp;Mechanical&nbsp;Keyboard&nbsp;-&nbsp;Black&nbsp;-&nbsp;$156.99'</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;panorama.add(&nbsp;infospot&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;infospot&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">new</span>&nbsp;PANOLENS.Infospot(&nbsp;<span style="color:#c10aff">1</span>,&nbsp;PANOLENS.DataImage.Info&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;infospot.position.set(&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">13.</span><span style="color:#c10aff">62</span>,&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">10.</span><span style="color:#c10aff">56</span>,&nbsp;<span style="color:#c10aff">6.</span><span style="color:#c10aff">64</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;infospot.addHoverElement(&nbsp;<span style="color:#4be6fa">document</span>.<span style="color:#4be6fa">getElementById</span>(&nbsp;<span style="color:#ffd500">'chair-container'</span>&nbsp;),&nbsp;<span style="color:#c10aff">280</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;panorama.add(&nbsp;infospot&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;infospot&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">new</span>&nbsp;PANOLENS.Infospot(&nbsp;<span style="color:#c10aff">2</span>,&nbsp;<span style="color:#ffd500">'asset/textures/danger.png'</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;infospot.position.set(&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">14.</span><span style="color:#c10aff">07</span>,&nbsp;<span style="color:#c10aff">19.</span><span style="color:#c10aff">58</span>,&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">6.</span><span style="color:#c10aff">92</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;infospot.addHoverText(&nbsp;<span style="color:#ffd500">'Ventilation&nbsp;Pipe&nbsp;-&nbsp;Caution&nbsp;-&nbsp;Extremely&nbsp;Hot'</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;panorama.add(&nbsp;infospot&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
그래서 포지션의 값을 비교해보니 내가 생성한 POI의 좌표값과 예제에 나와있는 좌표값이 크게 달랐다.
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">var</span>&nbsp;myInfospot&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">new</span>&nbsp;PANOLENS.Infospot();</div><div style="padding:0 6px; white-space:pre; line-height:130%">myInfospot.position.set(&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">1673.</span><span style="color:#c10aff">8</span>,&nbsp;<span style="color:#c10aff">8.</span><span style="color:#c10aff">58</span>,&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">4705.</span><span style="color:#c10aff">51</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">myInfospot.addHoverText(&nbsp;<span style="color:#ffd500">'내&nbsp;스팟'</span>,&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span><span style="color:#c10aff">50</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">myInfospot.setCursorHoverStyle(&nbsp;<span style="color:#ffd500">'pointer'</span>&nbsp;);&nbsp;<span style="color:#999999">//&nbsp;set&nbsp;infospot&nbsp;hover&nbsp;style&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">myInfospot.draggable();</div><div style="padding:0 6px; white-space:pre; line-height:130%">panorama.add(myInfospot);</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
아무래도 POI를 오브젝트와 근접한 곳에 위치 시켜서 카메라를 돌렸을때 마치 오브젝트에 붙어있는 것과 같은 효과를 내는것 같았다.

## 이슈
불러온 오브젝트에서 POI를 붙일 포지션의 값을 어떻게 가져와야 하는가?
