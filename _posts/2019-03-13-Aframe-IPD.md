---
layout: post
title:  "Aframe ipd  관련 자료 검토"
tags:
  - Aframe.js
  - krpano
  - WebVR
  - 360VR
hero: /../assets/resources/img/aframe/ipd/ipd post.png
overlay: red
published: true

---
## 360VR
Aframe.js 에서 IPD 설정이 가능한지 여부를 확인이 필요했다. 우선 IPD가 무엇인지 알아보자.
{: .lead}

## IPD
IPD: Inter pupillary distance, <a href='https://search.naver.com/search.naver?sm=top_hty&fbm=1&ie=utf8&query=Interpupillary+distance'>동공 거리</a>
<!–-break-–>

양쪽 눈의 동공 중심을 잇는 선의 거리.
사람에 따라 다소 차이는 있으나 대개 65mm이다.
<a href='https://search.naver.com/search.naver?sm=top_hty&fbm=1&ie=utf8&query=Interpupillary+distance'>[네이버지식백과]</a> 그런데 사람에 따라 동공사이의 거리가 조금씩 다르고 화면을 VR모드로 변경해서 카드보드를 쓰면 초점이 맞지 않을 수 있다.

그래서 VR기기에서 물리적 IPD의 거리를 조절할 수 있게 지원을 하거나 KRPANO처럼 소프트웨어에서 조절을 할 수 있도록 지원한다.
<img src='/../assets/resources/img/aframe/ipd/krpano ipd.gif' alt='aframe ipd'>

## Aframe에서 IPD 검색 
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div><div style="line-height:130%">54</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">/**</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Assumes&nbsp;2&nbsp;cameras&nbsp;that&nbsp;are&nbsp;parallel&nbsp;and&nbsp;share&nbsp;an&nbsp;X-axis,&nbsp;and&nbsp;that</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;the&nbsp;cameras'&nbsp;projection&nbsp;and&nbsp;world&nbsp;matrices&nbsp;have&nbsp;already&nbsp;been&nbsp;set.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;And&nbsp;that&nbsp;near&nbsp;and&nbsp;far&nbsp;planes&nbsp;are&nbsp;identical&nbsp;for&nbsp;both&nbsp;cameras.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Visualization&nbsp;of&nbsp;this&nbsp;technique:&nbsp;https://computergraphics.stackexchange.com/a/4765</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">function</span>&nbsp;setProjectionFromUnion(&nbsp;camera,&nbsp;cameraL,&nbsp;cameraR&nbsp;)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cameraLPos.setFromMatrixPosition(&nbsp;cameraL.matrixWorld&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cameraRPos.setFromMatrixPosition(&nbsp;cameraR.matrixWorld&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;ipd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;cameraLPos.distanceTo(&nbsp;cameraRPos&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;projL&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;cameraL.projectionMatrix.elements;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;projR&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;cameraR.projectionMatrix.elements;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;VR&nbsp;systems&nbsp;will&nbsp;have&nbsp;identical&nbsp;far&nbsp;and&nbsp;near&nbsp;planes,&nbsp;and</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;most&nbsp;likely&nbsp;identical&nbsp;top&nbsp;and&nbsp;bottom&nbsp;frustum&nbsp;extents.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Use&nbsp;the&nbsp;left&nbsp;camera&nbsp;for&nbsp;these&nbsp;values.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;near&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;projL[&nbsp;<span style="color:#c10aff">14</span>&nbsp;]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>&nbsp;(&nbsp;projL[&nbsp;<span style="color:#c10aff">10</span>&nbsp;]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>&nbsp;<span style="color:#c10aff">1</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;far&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;projL[&nbsp;<span style="color:#c10aff">14</span>&nbsp;]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>&nbsp;(&nbsp;projL[&nbsp;<span style="color:#c10aff">10</span>&nbsp;]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;<span style="color:#c10aff">1</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;topFov&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;(&nbsp;projL[&nbsp;<span style="color:#c10aff">9</span>&nbsp;]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;<span style="color:#c10aff">1</span>&nbsp;)&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>&nbsp;projL[&nbsp;<span style="color:#c10aff">5</span>&nbsp;];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;bottomFov&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;(&nbsp;projL[&nbsp;<span style="color:#c10aff">9</span>&nbsp;]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>&nbsp;<span style="color:#c10aff">1</span>&nbsp;)&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>&nbsp;projL[&nbsp;<span style="color:#c10aff">5</span>&nbsp;];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;leftFov&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;(&nbsp;projL[&nbsp;<span style="color:#c10aff">8</span>&nbsp;]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>&nbsp;<span style="color:#c10aff">1</span>&nbsp;)&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>&nbsp;projL[&nbsp;<span style="color:#c10aff">0</span>&nbsp;];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;rightFov&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;(&nbsp;projR[&nbsp;<span style="color:#c10aff">8</span>&nbsp;]&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;<span style="color:#c10aff">1</span>&nbsp;)&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>&nbsp;projR[&nbsp;<span style="color:#c10aff">0</span>&nbsp;];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;left&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;near&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;leftFov;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;right&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;near&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;rightFov;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Calculate&nbsp;the&nbsp;new&nbsp;camera's&nbsp;position&nbsp;offset&nbsp;from&nbsp;the</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;left&nbsp;camera.&nbsp;xOffset&nbsp;should&nbsp;be&nbsp;roughly&nbsp;half&nbsp;`ipd`.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;zOffset&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;ipd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>&nbsp;(&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>&nbsp;leftFov&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;rightFov&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;xOffset&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;zOffset&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>&nbsp;leftFov;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;TODO:&nbsp;Better&nbsp;way&nbsp;to&nbsp;apply&nbsp;this&nbsp;offset?</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cameraL.matrixWorld.decompose(&nbsp;camera.position,&nbsp;camera.quaternion,&nbsp;camera.scale&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.translateX(&nbsp;xOffset&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.translateZ(&nbsp;zOffset&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.matrixWorld.compose(&nbsp;camera.position,&nbsp;camera.quaternion,&nbsp;camera.scale&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.matrixWorldInverse.getInverse(&nbsp;camera.matrixWorld&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;Find&nbsp;the&nbsp;union&nbsp;of&nbsp;the&nbsp;frustum&nbsp;values&nbsp;of&nbsp;the&nbsp;cameras&nbsp;and&nbsp;scale</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;the&nbsp;values&nbsp;so&nbsp;that&nbsp;the&nbsp;near&nbsp;plane's&nbsp;position&nbsp;does&nbsp;not&nbsp;change&nbsp;in&nbsp;world&nbsp;space,</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;although&nbsp;must&nbsp;now&nbsp;be&nbsp;relative&nbsp;to&nbsp;the&nbsp;new&nbsp;union&nbsp;camera.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;near2&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;near&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;zOffset;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;far2&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;far&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;zOffset;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;left2&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;left&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>&nbsp;xOffset;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;right2&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;right&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;(&nbsp;ipd&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">-</span>&nbsp;xOffset&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;top2&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;topFov&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;far&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>&nbsp;far2&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;near2;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;bottom2&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;bottomFov&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;far&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>&nbsp;far2&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">*</span>&nbsp;near2;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;camera.projectionMatrix.makePerspective(&nbsp;left2,&nbsp;right2,&nbsp;top2,&nbsp;bottom2,&nbsp;near2,&nbsp;far2&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
setProjectionFromUnion에서 IPD을 찾을 수 있었다. setProjectionFromUnion은 setProjectionFromUnion은 this.getCamera = function ( camera ) 함수에서 호출된다. 

## this.getCamera = function ( camera )
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">this.getCamera&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#ff3399">function</span>&nbsp;(&nbsp;camera&nbsp;)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>&nbsp;(&nbsp;isPresenting()&nbsp;)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;<span style="color:#4be6fa">parent</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;camera.<span style="color:#4be6fa">parent</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;cameras&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;cameraVR.cameras;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;object&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;poseTarget&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">|</span><span style="color:#0086b3"></span><span style="color:#ff3399">|</span>&nbsp;camera;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCamera(&nbsp;cameraVR,&nbsp;<span style="color:#4be6fa">parent</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">for</span>&nbsp;(&nbsp;<span style="color:#ff3399">var</span>&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>;&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>&nbsp;cameras.<span style="color:#4be6fa">length</span>;&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span><span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateCamera(&nbsp;cameras[&nbsp;i&nbsp;],&nbsp;<span style="color:#4be6fa">parent</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;update&nbsp;camera&nbsp;and&nbsp;its&nbsp;children</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object.matrixWorld.copy(&nbsp;cameraVR.matrixWorld&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;children&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;object.children;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">for</span>&nbsp;(&nbsp;<span style="color:#ff3399">var</span>&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>,&nbsp;l&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;children.<span style="color:#4be6fa">length</span>;&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>&nbsp;l;&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">+</span><span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children[&nbsp;i&nbsp;].updateMatrixWorld(&nbsp;<span style="color:#c10aff">true</span>&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setProjectionFromUnion(&nbsp;cameraVR,&nbsp;cameraL,&nbsp;cameraR&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;cameraVR;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;camera;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">};</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
하지만 관련 부분을 수정하고 테스트를 해봤지만 별다른 소득을 얻을 수 없었다. 나중에 알게된 사실이지만 WebXRManager에서 관련 부분을 다루고 있다고 본 것 같기도 하다. 


